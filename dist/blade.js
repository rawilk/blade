!function(factory){"function"==typeof define&&define.amd?define(factory):factory()}((function(){"use strict";function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function accordion(Alpine){Alpine.directive("accordion",(function(el,directive){directive.value?"button"===directive.value?function(el,Alpine){Alpine.bind(el,{"x-init":function(){"button"!==this.$el.tagName.toLowerCase()||this.$el.hasAttribute("type")?"button"===this.$el.tagName.toLowerCase()||this.$el.hasAttribute("role")||this.$el.setAttribute("role","button"):this.$el.type="button"},":tabindex":function(){return"button"===this.$el.tagName.toLowerCase()||this.$data.__isDisabled?null:0},":id":function(){return this.$data.$id("blade-accordion-button")},"@click":function(){this.$data.__toggle()},":aria-expanded":function(){return this.$data.__isSelected},":aria-controls":function(){return this.$data.$id("blade-accordion-panel")},"@keydown.space.prevent.stop":function(){this.$data.__toggle()},"@keydown.enter.prevent.stop":function(){this.$data.__toggle()},"@keydown.arrow-down":function(e){if("function"==typeof this.$data.__focusNext)return e.preventDefault(),e.stopPropagation(),this.$data.__focusNext(this.$data.__panelEl)},"@keydown.arrow-up":function(e){if("function"==typeof this.$data.__focusPrev)return e.preventDefault(),e.stopPropagation(),this.$data.__focusPrev(this.$data.__panelEl)},"@keydown.home":function(e){if("function"==typeof this.$data.__focusFirst)return e.preventDefault(),e.stopPropagation(),this.$data.__focusFirst()},"@keydown.end":function(e){if("function"==typeof this.$data.__focusLast)return e.preventDefault(),e.stopPropagation(),this.$data.__focusLast()},"@keyup.space.prevent":function(){}})}(el,Alpine):"panel"===directive.value?function(el,Alpine){Alpine.bind(el,{"x-show":function(){return this.$accordion.isOpen},":id":function(){return this.$data.$id("blade-accordion-panel")}})}(el,Alpine):"group"===directive.value&&function(el,Alpine){Alpine.bind(el,{"x-data":function(){return{__active:void 0,__ready:!1,__multiple:!1,__panels:[],init:function(){var _this2=this;this.__multiple=Boolean(Alpine.bound(this.$el,"multiple",!1)),this.__multiple&&void 0===this.__active&&(this.__active=[]),queueMicrotask((function(){_this2.__ready=!0}))},__enabledPanels:function(){return this.__panels.filter((function(panel){return!panel.__disabled}))},__addPanel:function(el){this.__panels.push(el)},__selectPanel:function(el){var id="object"===_typeof(el)?el.__id:el;if(this.__multiple)return this.__active.includes(id)?(this.__dispatchEvent("accordion-close",{id:id}),this.__active.splice(this.__active.indexOf(id),1)):(this.__dispatchEvent("accordion-open",{id:id}),this.__active.push(id));var isClosing=this.__active===id;this.__active=isClosing?null:id,this.__dispatchEvent(isClosing?"accordion-close":"accordion-open",{id:id})},__isSelectedPanel:function(el){return this.__multiple?this.__active.includes(el.__id):this.__active===el.__id},__closeAll:function(){if(this.__dispatchEvent("accordion-close-all"),this.__multiple)return this.__active=[];this.__active=null},__openAll:function(){var _this3=this;this.__enabledPanels().forEach((function(panel){_this3.__multiple?!_this3.__active.includes(panel.__id)&&_this3.__active.push(panel.__id):_this3.__active=panel.__id})),this.__dispatchEvent("accordion-open-all")},__dispatchEvent:function(name){var detail=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.__ready&&this.$dispatch(name,detail)},__focusNext:function(panelEl){var enabledPanels=this.__enabledPanels(),currentIndex=enabledPanels.indexOf(panelEl),nextIndex=currentIndex+1>=enabledPanels.length?0:currentIndex+1;this.__focusPanel(enabledPanels,nextIndex)},__focusPrev:function(panelEl){var enabledPanels=this.__enabledPanels(),currentIndex=enabledPanels.indexOf(panelEl),prevIndex=currentIndex-1<0?enabledPanels.length-1:currentIndex-1;this.__focusPanel(enabledPanels,prevIndex)},__focusFirst:function(){this.__focusPanel(this.__enabledPanels(),0)},__focusLast:function(){var enabledPanels=this.__enabledPanels();this.__focusPanel(enabledPanels,enabledPanels.length-1)},__focusPanel:function(panels,index){var panel=panels[index];(null==panel?void 0:panel.__button)&&panel.__button.focus()}}}})}(el,Alpine):function(el,Alpine){Alpine.bind(el,{"x-modelable":"__isOpen","x-data":function(){return{__isOpen:!1,__id:void 0,__panelEl:void 0,__isDisabled:!1,init:function(){var _Alpine$bound,_this=this;this.__id=null!==(_Alpine$bound=Alpine.bound(this.$el,"id"))&&void 0!==_Alpine$bound?_Alpine$bound:this.$id("blade-accordion");var defaultIsOpen=Boolean(Alpine.bound(this.$el,"default-open",!1));this.__panelEl=this.$el,this.__panelEl.__disabled=Alpine.bound(this.$el,"disabled",!1),this.__isDisabled=this.__panelEl.__disabled,this.__panelEl.__id=this.__id,defaultIsOpen&&(this.__isOpen=!0),"function"==typeof this.$data.__addPanel&&this.$data.__addPanel(this.$el),this.__isOpen&&"function"==typeof this.$data.__selectPanel&&this.__shouldSelectOnInit()&&this.$data.__selectPanel(this.$el),queueMicrotask((function(){_this.__panelEl.__button=_this.$el.querySelector("#".concat(_this.$data.$id("blade-accordion-button"))),new MutationObserver((function(mutations){mutations.forEach((function(mutation){"disabled"===mutation.attributeName&&(_this.__panelEl.__disabled=_this.$el.hasAttribute("disabled"),_this.__isDisabled=_this.__panelEl.__disabled)}))})).observe(_this.$el,{attributes:!0})}))},__shouldSelectOnInit:function(){return!!this.$data.__multiple||void 0===this.$data.__active},get __isSelected(){return"function"==typeof this.$data.__isSelectedPanel?this.$data.__isSelectedPanel(this.__panelEl):this.__isOpen},__close:function(){this.__isDisabled||(this.__isOpen=!1,"function"==typeof this.$data.__selectPanel&&this.$data.__selectPanel(this.$data.__multiple?this.__panelEl:null))},__open:function(){this.__isDisabled||(this.__isOpen=!0,"function"==typeof this.$data.__selectPanel&&this.$data.__selectPanel(this.__panelEl))},__toggle:function(){this.__isDisabled||(this.__isOpen=!this.__isOpen,"function"==typeof this.$data.__selectPanel&&this.$data.__selectPanel(this.__panelEl))}}},"x-id":function(){return["blade-accordion-panel","blade-accordion-button"]}})}(el,Alpine)})).before("bind"),Alpine.magic("accordion",(function(el){var data=Alpine.$data(el);return{get isOpen(){return data.__isSelected},get isDisabled(){return data.__isDisabled},close:function(){data.__close()},open:function(){data.__open()},toggle:function(){data.__toggle()}}})),Alpine.magic("accordionGroup",(function(el){var data=Alpine.$data(el);return{selectPanel:function(panelEl){if("object"!==_typeof(panelEl))return data.__selectPanel(panelEl);if(panelEl instanceof HTMLElement){var $data=Alpine.$data(panelEl);$data.__panelEl&&data.__selectPanel($data.__panelEl)}else data.__selectPanel(panelEl)},closeAll:function(){data.__closeAll()},openAll:function(){data.__openAll()}}}))}document.addEventListener("alpine:init",(function(){accordion(Alpine)}))}));
//# sourceMappingURL=blade.js.map
